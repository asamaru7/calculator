!function(){"use strict";for(var t={numberFormat:function(t,e,n,r){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var a,o=isFinite(+t)?+t:0,i=isFinite(+e)?Math.abs(e):0,s=void 0===r?",":r,u=void 0===n?".":n;return a=(i?function(t,e){if(-1===(""+t).indexOf("e"))return+(Math.round(t+"e+"+e)+"e-"+e);var n=(""+t).split("e"),r="";return+n[1]+e>0&&(r="+"),(+(Math.round(+n[0]+"e"+r+(+n[1]+e))+"e-"+e)).toFixed(e)}(o,i).toString():""+Math.round(o)).split("."),a[0].length>3&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(a[1]||"").length<i&&(a[1]=a[1]||"",a[1]+=new Array(i-a[1].length+1).join("0")),a.join(u)},moneyKorean:function(t,e){for(var n=["","1","2","3","4","5","6","7","8","9"],r=["","십","백","천","만 ","십만 ","백만 ","천만 ","억 ","십억 ","백억 ","천억 ","조 ","십조 ","백조"],a=[],o=String(t),i=o.length,s="",u=0;u<i;u++)a[u]=o.substr(u,1);for(var h=i,l=0;l<i;l++){h--;var f="";""!==n[a[l]]&&(f=r[h],h>4&&(Math.floor(h/4)===Math.floor((h-1)/4)&&""!==n[a[l+1]]||Math.floor(h/4)===Math.floor((h-2)/4)&&""!==n[a[l+2]])&&(f=r[h].substr(0,1))),s+=n[a[l]]+f+(e||"")}return $.trim(s)},moneySimpleKorean:function(t,e){for(var n=!(t<0)&&t,r=["","만","억","조","경"],a=r.length,o=[],i="",s=0;s<a;s++){var u=n%Math.pow(1e4,s+1)/Math.pow(1e4,s);(u=Math.floor(u))>0&&(o[s]=u)}for(var h=0;h<o.length;h++)o[h]&&(i=String(this.numberFormat(o[h]))+r[h]+(e||"")+i);return i},formatDate:function(){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=["January","February","March","April","May","June","July","August","September","October","November","December"];function n(t,e){return(1e9+t+"").slice(-e)}function r(t){for(var e=new Date(t,0,1);e.getDay()-1;)e.setDate(e.getDate()+1);return+e}return function(a,o){a=a.replace(/r/g,"D, d M Y H:i:s O").replace(/c/g,"Y-m-d\\TH:i:sP");for(var i,s,u=(o=o||new Date).getFullYear(),h=o.getMonth(),l=o.getDate(),f=o.getDay(),c=o.getHours(),d=o.getMinutes(),m=o.getSeconds(),y=o.getMilliseconds(),p=o.getTimezoneOffset(),g={d:n(l,2),D:t[f].substr(0,3),j:l,l:t[f],N:f||7,S:(s=l,["th","st","nd","rd"][(s=~~(s<0?-s:s)%100)>10&&s<14||(s%=10)>3?0:s]),w:f,z:0|(o-new Date(u,0,1))/864e5,W:Math.ceil((i=o,~~((864e5*~~(i/864e5)-r(u))/864e5+.5)/7)),F:e[h],m:n(h+1,2),M:e[h].substr(0,3),n:h+1,t:new Date(u,h+1,0).getDate(),L:+(29==new Date(u,2,0).getDate()),o:u-+(new Date(r(u))>o),Y:u,y:(u+"").slice(-2),a:c>11?"pm":"am",A:c>11?"PM":"AM",B:0|(y+1e3*(m+60*(d+60*c)))/86400,g:c%12||12,G:c,h:n(c%12||12,2),H:n(c,2),i:n(d,2),s:n(m,2),u:1e3*y,e:void 0,I:+!!((o-new Date(u,0,1))%864e5),O:/(\S*\s){5}\S+([\+\-]\d{4})/.exec(o.toString())[2],P:/(\S*\s){5}\S+([\+\-]\d{2})(\d{2})/.exec(o.toString()).slice(2).join(":"),T:void 0,Z:60*-p,U:0|o/1e3},M="";a;){var D=a.charAt(0);if("\\"!=D){var v=g[D];M+=void 0!==v?v:D,a=a.slice(1)}else M+=a.charAt(1),a=a.slice(2)}return M}}()},e={clone:function(t){return new Date(t.getTime())},firstDayOfMonth:function(t){if("string"==typeof t){var e=t.split(" ")[0].split("-");return new Date(parseInt(e[0]),parseInt(e[1])-1,1)}return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth:function(t,e){if(void 0===e&&(e=0),"string"==typeof t){var n=t.split(" ")[0].split("-");return new Date(parseInt(n[0]),parseInt(n[1])+e,0)}return new Date(t.getFullYear(),t.getMonth()+1+e,0)},max:function(t,e){return t>e?t:e},for:function(t,e,n){for(var r=this.clone(t);r<=e;)n(r),r.setDate(r.getDate()+1)},isFirstDayOfMonth:function(t){return this.equalDate(this.firstDayOfMonth(t),t)},isLastDayOfMonth:function(t){return this.equalDate(this.lastDayOfMonth(t),t)},cloneAddMonth:function(t,e){var n=this.clone(t);return n.setMonth(n.getMonth()+e),n},cloneSetDay:function(t,e){var n=this.clone(t);return n.setDate(e),n},equalDate:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},stringToDate:function(t){var e=t.split(" ")[0].split("-");return new Date(parseInt(e[0]),parseInt(e[1])-1,e[2])}},n=[],r=0;r<28;r++)n.push(r+1);$((function(){var r={dates:n,interestRate:3,interestDate:20,lists:[],periodType:"m",period:1,moneyType:"w",money:0,moneyDate:"",result:null};new Vue({el:"section.calculator",data:$.extend(!0,{},r),computed:{periodMonth:function(){return parseInt(this.period)*("y"===this.periodType?12:1)}},created:function(){},mounted:function(){this.reset(),this.moneyDate=t.formatDate("Y-m-d",new Date),this.period=1},methods:{numberFormat:function(e,n){return t.numberFormat(e,n)},moneySimpleKorean:function(e){return t.moneySimpleKorean(parseInt(Math.floor(e))," ")},append:function(){this.lists.push({date:this.moneyDate,type:this.moneyType,money:this.money}),this.money=""},typeText:function(t){switch(t){case"w":return"출금";case"wi":return"이자출금";case"d":return"입금";default:return"알수없음"}},_calculate:function(t,e,n){var r=Math.abs(e)+Math.abs(n)-Math.max(Math.abs(t),Math.abs(e));return Math.max(r,0)},_daySum:function(t,e,n,r){for(var a={start:n.end,end:n.end,max:n.end,interest:0,sigma:0},o=0;o<e.length;o++){var i=e[o];i.date===t&&(a.end+=i.money*("d"===i.type?1:-1),a.max=Math.max(Math.abs(a.end),Math.abs(a.max)))}return a.sigma=this._calculate(a.start,a.end,a.max),a.interest=Math.floor(a.sigma*r/365),a},calc:function(){var n=this,r=this.interestRate/100,a=e.stringToDate(this.lists.reduce((function(t,e){return t<e.date?t:e.date}),this.lists[0].date)),o=e.max(e.lastDayOfMonth(a,this.periodMonth),e.lastDayOfMonth(this.lists.reduce((function(t,e){return t>e.date?t:e.date}),this.lists[0].date))),i={},s={},u=JSON.parse(JSON.stringify(this.lists)),h={start:0,end:0,max:0,interest:0,sigma:0},l=0;return e.for(a,o,(function(a){var o=t.formatDate("Y-m-d",a);if(e.isLastDayOfMonth(a)){var f=e.cloneSetDay(a,n.interestDate);f.setMonth(f.getMonth()+1),i[t.formatDate("Y-m-d",f)]={month:a.getMonth()+1,interest:Math.floor(l)},l=0}i.hasOwnProperty(o)&&u.push({date:o,type:"wi",money:i[o].interest}),s[o]=n._daySum(o,u,h,r),l+=s[o].interest,h=JSON.parse(JSON.stringify(s[o]))})),this.result={daily:s,monthly:i},$("html, body").scrollTop($("#results-anchor").offset().top-100),!1},reset:function(){for(var t in r)r.hasOwnProperty(t)&&(this[t]=r[t])}}})}))}();